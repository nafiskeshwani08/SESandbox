{"triggers":[],"nodes":[{"uid":"7f684e7c-4b71-411b-9741-856a9606398d","commandName":"Comment","packageName":"Comment","disabled":false,"attributes":[{"name":"comment","value":{"type":"STRING","string":"Compare the original line items to the changes"}}]},{"uid":"d5bf7d9a-c561-44e3-bca9-01b3eb36c7de","commandName":"step","packageName":"Step","disabled":false,"children":[{"uid":"efa4ab6e-2a62-42af-9977-983c08389e6a","commandName":"sort","packageName":"DataTable","disabled":false,"attributes":[{"name":"table","value":{"type":"VARIABLE","variableName":"Original_DTable"}},{"name":"sortOptions","value":{"type":"STRING","string":"NAME"}},{"name":"columnName","value":{"type":"STRING","string":"SKU"}},{"name":"sortType","value":{"type":"STRING","string":"ASCENDING"}}]},{"uid":"b47aa0dd-2c58-4050-a01d-c61608c56f50","commandName":"sort","packageName":"DataTable","disabled":false,"attributes":[{"name":"table","value":{"type":"VARIABLE","variableName":"Updated_DTable"}},{"name":"sortOptions","value":{"type":"STRING","string":"NAME"}},{"name":"columnName","value":{"type":"STRING","string":"SKU"}},{"name":"sortType","value":{"type":"STRING","string":"ASCENDING"}}]}],"attributes":[{"name":"title","value":{"type":"STRING","string":"Sort the tables so we can loop through rows in the same order"}}]},{"uid":"fda2bf07-1556-4f14-8250-37e5ec650a70","commandName":"step","packageName":"Step","disabled":false,"children":[{"uid":"41b760a9-c46e-4be7-99f6-3fec747942a4","commandName":"loop.commands.start","packageName":"Loop","disabled":false,"children":[{"uid":"6b5eb637-fc1c-43f6-9edf-2c8c240cf946","commandName":"compare","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$OGTableRow[0]$"}},{"name":"stringToCompare","value":{"type":"STRING","expression":"$Updated_DTable[$Counter$][0]$"}},{"name":"matchCase","value":{"type":"STRING","string":"false"}}],"returnTo":{"type":"VARIABLE","variableName":"Matched"}},{"uid":"f7b7a4c2-ae6f-4a30-90e8-8949fc317a9a","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"e821a3ec-2a55-4380-bf0d-8b29b29cea33","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"3b215de6-8388-4825-b383-c93d340619a6","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$lineitems$,"}}],"returnTo":{"type":"VARIABLE","variableName":"lineitems"}}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"NUMBER","expression":"$Counter$"}},{"name":"operator","value":{"type":"STRING","string":"GT"}},{"name":"value","value":{"type":"NUMBER","number":"0"}}],"value":{"type":"CONDITIONAL","conditionalName":"numberVariable","packageName":"Number"}}]},{"uid":"b37719d5-5c3d-4a2f-a1e7-0c533a29b958","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$lineitems${\"item_id\":\"$Original_DTable[$Counter$][5]$\",\"quantity\":$Updated_DTable[$Counter$][2]$,\"rate\":$Updated_DTable[$Counter$][3]$}"}}],"returnTo":{"type":"VARIABLE","variableName":"lineitems"}}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"BOOLEAN","expression":"$Matched$"}},{"name":"operator","value":{"type":"STRING","string":"EQ"}},{"name":"value","value":{"type":"BOOLEAN","boolean":true}}],"value":{"type":"CONDITIONAL","conditionalName":"booleanVariable","packageName":"Boolean"}}]},{"uid":"696197f8-fc70-445d-a0c4-d8bc6780bbcd","commandName":"increment","packageName":"Number","disabled":false,"attributes":[{"name":"source","value":{"type":"NUMBER","expression":"$Counter$"}},{"name":"by","value":{"type":"NUMBER","number":"1"}}],"returnTo":{"type":"VARIABLE","variableName":"Counter"}}],"attributes":[{"name":"loopType","value":{"type":"STRING","string":"ITERATOR"}},{"name":"iterator","returnTo":{"type":"VARIABLE","variableName":"OGTableRow"},"attributes":[{"name":"sourceTable","value":{"type":"VARIABLE","variableName":"Original_DTable"}}],"value":{"type":"ITERATOR","iteratorName":"iteratorTableRow","packageName":"DataTable"}}]}],"attributes":[{"name":"title","value":{"type":"STRING","string":"Compare data tables"}}]},{"uid":"657b8482-f695-4593-b565-87e03b1af0a4","commandName":"step","packageName":"Step","disabled":false,"children":[{"uid":"f4141608-b291-41eb-b1c0-67902a209104","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"71cb126f-fa9d-4b07-b21a-566c00062b74","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"3.0%"}}],"returnTo":{"type":"VARIABLE","variableName":"discount"}}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"BOOLEAN","expression":"$discount_applied$"}},{"name":"operator","value":{"type":"STRING","string":"EQ"}},{"name":"value","value":{"type":"BOOLEAN","boolean":true}}],"value":{"type":"CONDITIONAL","conditionalName":"booleanVariable","packageName":"Boolean"}}]}],"attributes":[{"name":"title","value":{"type":"STRING","string":"Check if we also need to apply an order level discount"}}]},{"uid":"ae04f1a6-2c95-4537-a753-480ffaa86cd5","commandName":"step","packageName":"Step","disabled":false,"children":[{"uid":"7b1ee2c5-519c-49ce-a98f-bbb9bea27d6b","commandName":"restPost","packageName":"Rest","disabled":false,"attributes":[{"name":"uriOption","value":{"type":"STRING","string":"text"}},{"name":"uri","value":{"type":"STRING","expression":"https://accounts.zoho.com/oauth/v2/token?refresh_token=$refresh_token$&client_id=$client_id$&client_secret=$client_secret$&redirect_uri=$redirect_uri$&grant_type=$grant_type$"}},{"name":"proxyType","value":{"type":"STRING","string":"SYSTEM"}},{"name":"authenticationMode","value":{"type":"STRING","string":"NoAuthentication"}},{"name":"headerContentType","value":{"type":"STRING","string":"application/json"}},{"name":"parameterOption","value":{"type":"STRING","string":"text"}},{"name":"jsonPostParameters","value":{"type":"STRING","string":""}},{"name":"captureFailureResponse","value":{"type":"BOOLEAN","boolean":false}},{"name":"allowInsecureConnection","value":{"type":"BOOLEAN","boolean":false}},{"name":"timeOut","value":{"type":"NUMBER","number":"60000"}}],"returnTo":{"type":"DICTIONARY","dictionary":[{"key":"Body","value":{"type":"VARIABLE","variableName":"authResponse"}}]}},{"uid":"bd45bd93-ae76-40e1-b81a-5388ee287641","commandName":"Initialize","packageName":"JSONHandler","disabled":false,"attributes":[{"name":"sessionName","value":{"type":"STRING","string":"Default"}},{"name":"jsonString","value":{"type":"STRING","expression":"$authResponse$"}}],"returnTo":{"type":"VARIABLE","variableName":"JSONAuthResponse"}},{"uid":"02040862-2540-49c5-918e-029035923eb6","commandName":"Query","packageName":"JSONHandler","disabled":false,"attributes":[{"name":"sessionName","value":{"type":"STRING","string":"Default"}},{"name":"jsonQuery","value":{"type":"STRING","string":"access_token"}}],"returnTo":{"type":"VARIABLE","variableName":"access_token"}},{"uid":"8835dbc3-f723-4955-ac13-99ab0001f78a","commandName":"messageBox","packageName":"MessageBox","disabled":true,"attributes":[{"name":"title","value":{"type":"STRING","string":"Automation Anywhere Enterprise Client"}},{"name":"content","value":{"type":"STRING","expression":"Discount: $discount$"}},{"name":"scrollLines","value":{"type":"NUMBER","number":"30"}},{"name":"closeMsgBox","value":{"type":"BOOLEAN","boolean":true}},{"name":"timeOut","value":{"type":"NUMBER","number":"5"}}]},{"uid":"e97d8f0f-d312-424f-abce-137e2970be89","commandName":"restPut","packageName":"Rest","disabled":false,"attributes":[{"name":"uriOption","value":{"type":"STRING","string":"text"}},{"name":"uri","value":{"type":"STRING","expression":"https://inventory.zoho.com/api/v1/salesorders/$salesorder_id$?organization_id=$zoho_orgid$"}},{"name":"proxyType","value":{"type":"STRING","string":"SYSTEM"}},{"name":"authenticationMode","value":{"type":"STRING","string":"NoAuthentication"}},{"name":"customHeaders","value":{"type":"LIST","list":[{"type":"DICTIONARY","dictionary":[{"key":"enabled","value":{"type":"BOOLEAN","boolean":true}},{"key":"name","value":{"type":"STRING","string":"Authorization"}},{"key":"value","value":{"type":"STRING","expression":"Zoho-oauthtoken $access_token$"}}]}]}},{"name":"headerContentType","value":{"type":"STRING","string":"application/json"}},{"name":"parameterOption","value":{"type":"STRING","string":"text"}},{"name":"jsonPostParameters","value":{"type":"STRING","expression":"{\n    \"salesorder_number\": \"{{salesorder_number}}\",\n     \"customer_id\": \"{{customer_id}}\",\n      \"line_items\": [\n             $lineitems$\n          ],\n        \"discount\":{{discount_percent}}\n}"}},{"name":"stringSubstitution","value":{"type":"LIST","list":[{"type":"DICTIONARY","dictionary":[{"key":"name","value":{"type":"STRING","string":"salesorder_number"}},{"key":"value","value":{"type":"STRING","expression":"$order_number$"}}]},{"type":"DICTIONARY","dictionary":[{"key":"name","value":{"type":"STRING","string":"customer_id"}},{"key":"value","value":{"type":"STRING","expression":"$customer_id$"}}]},{"type":"DICTIONARY","dictionary":[{"key":"name","value":{"type":"STRING","string":"discount_percent"}},{"key":"value","value":{"type":"STRING","expression":"$discount$"}}]}]}},{"name":"captureFailureResponse","value":{"type":"BOOLEAN","boolean":false}},{"name":"allowInsecureConnection","value":{"type":"BOOLEAN","boolean":false}},{"name":"timeOut","value":{"type":"NUMBER","number":"60000"}}],"returnTo":{"type":"DICTIONARY","dictionary":[{"key":"Body","value":{"type":"VARIABLE","variableName":"putResponse"}}]}},{"uid":"aacab9bc-7fd8-4ca3-b485-7e87c85efc24","commandName":"Initialize","packageName":"JSONHandler","disabled":false,"attributes":[{"name":"sessionName","value":{"type":"STRING","string":"Default"}},{"name":"jsonString","value":{"type":"STRING","expression":"$putResponse$"}}],"returnTo":{"type":"VARIABLE","variableName":"JSONPutResponse"}},{"uid":"d1c14370-3c5d-4ae1-8e95-688a028f56d2","commandName":"Query","packageName":"JSONHandler","disabled":false,"attributes":[{"name":"sessionName","value":{"type":"STRING","string":"Default"}},{"name":"jsonQuery","value":{"type":"STRING","string":"message"}}],"returnTo":{"type":"VARIABLE","variableName":"response"}},{"uid":"46e4fff7-b281-41b1-a859-3649b4ea485c","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"ee89f1ae-7ec1-409a-a41f-15e602987a16","commandName":"assign","packageName":"Boolean","disabled":false,"attributes":[{"name":"source","value":{"type":"STRING","string":"constant"}},{"name":"userDefined","value":{"type":"STRING","string":"true"}}],"returnTo":{"type":"VARIABLE","variableName":"Success"}}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"STRING","expression":"$response$"}},{"name":"operator","value":{"type":"STRING","string":"EQ"}},{"name":"value","value":{"type":"STRING","string":"Sales Order has been updated."}},{"name":"matchCase","value":{"type":"BOOLEAN","boolean":false}},{"name":"isIgnoreCarriage","value":{"type":"BOOLEAN","boolean":true}}],"value":{"type":"CONDITIONAL","conditionalName":"stringVariable","packageName":"String"}}]},{"uid":"5b9575b4-ca8c-4e1d-860c-4e6461403a80","commandName":"messageBox","packageName":"MessageBox","disabled":true,"attributes":[{"name":"title","value":{"type":"STRING","string":"Automation Anywhere Enterprise Client"}},{"name":"content","value":{"type":"STRING","expression":"$response$"}},{"name":"scrollLines","value":{"type":"NUMBER","number":"30"}},{"name":"closeMsgBox","value":{"type":"BOOLEAN","boolean":true}},{"name":"timeOut","value":{"type":"NUMBER","number":"5"}}]}],"attributes":[{"name":"title","value":{"type":"STRING","string":"Create REST calls to update Zoho"}}]}],"variables":[{"type":"NUMBER","subtype":"UNDEFINED","readOnly":false,"input":false,"output":false,"name":"SampleNumber"},{"type":"STRING","subtype":"UNDEFINED","readOnly":false,"input":false,"output":false,"name":"SampleString"},{"name":"salesorder_id","description":"","type":"STRING","readOnly":false,"input":true,"output":false,"defaultValue":{"type":"STRING","string":""}},{"name":"order_number","description":"","type":"STRING","readOnly":false,"input":true,"output":false,"defaultValue":{"type":"STRING","string":""}},{"name":"Updated_DTable","description":"","type":"TABLE","readOnly":false,"input":true,"output":false,"defaultValue":{"type":"TABLE","table":{"schema":[{"type":"STRING"}],"rows":[{"values":[{"type":"STRING","string":""}]}]}}},{"name":"Original_DTable","description":"","type":"TABLE","readOnly":false,"input":true,"output":false,"defaultValue":{"type":"TABLE","table":{"schema":[{"type":"STRING"}],"rows":[{"values":[{"type":"STRING","string":""}]}]}}},{"name":"OGTableRow","description":"","type":"RECORD","readOnly":false,"input":false,"output":false,"subtype":"UNDEFINED","defaultValue":{"type":"RECORD","record":{"schema":[],"values":[]}}},{"name":"Counter","description":"","type":"NUMBER","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"NUMBER","number":"0"}},{"name":"Matched","description":"","type":"BOOLEAN","readOnly":false,"input":false,"output":false,"subtype":"UNDEFINED","defaultValue":{"type":"BOOLEAN","boolean":false}},{"name":"customer_id","description":"","type":"STRING","readOnly":false,"input":true,"output":false,"defaultValue":{"type":"STRING","string":""}},{"name":"authResponse","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":""}},{"name":"client_id","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"1000.GMW906NBAY5WO4A35XX4CQMV90M4HD"}},{"name":"client_secret","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"afe964b4226c017d06b18a4d14cc83085f0047fdab"}},{"name":"grant_type","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"refresh_token"}},{"name":"refresh_token","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"1000.ed9d38425b2f295b2d810f519a19c23c.86acd87fd7ecf74e7b9136363cc36a25"}},{"name":"redirect_uri","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"www.automationanywhere.com"}},{"name":"access_token","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"subtype":"UNDEFINED","defaultValue":{"type":"STRING","string":""}},{"name":"JSONAuthResponse","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"subtype":"UNDEFINED","defaultValue":{"type":"STRING","string":""}},{"name":"zoho_orgid","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"787120686"}},{"name":"lineitems","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":""}},{"name":"putResponse","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":""}},{"name":"discount","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":"0.0%"}},{"name":"discount_applied","description":"","type":"BOOLEAN","readOnly":false,"input":true,"output":false,"defaultValue":{"type":"BOOLEAN","boolean":false}},{"name":"JSONPutResponse","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"subtype":"UNDEFINED","defaultValue":{"type":"STRING","string":""}},{"name":"response","description":"","type":"STRING","readOnly":false,"input":false,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"Success","description":"","type":"BOOLEAN","readOnly":false,"input":false,"output":true,"defaultValue":{"type":"BOOLEAN","boolean":false}}],"breakpoints":["02040862-2540-49c5-918e-029035923eb6"],"packages":[{"name":"Boolean","version":"2.5.0-20220118-153154"},{"name":"Comment","version":"2.11.0-20220419-061753"},{"name":"DataTable","version":"4.5.1-20220509-073253"},{"name":"If","version":"3.4.0-20220127-062702"},{"name":"JSONHandler","version":"1.2-20200521-104916"},{"name":"Loop","version":"3.5.0-20220416-233919"},{"name":"MessageBox","version":"3.4.0-20220416-233919"},{"name":"Number","version":"3.5.0-20220416-233938"},{"name":"Rest","version":"3.11.1-20220714-082239"},{"name":"Step","version":"2.3.0-20220715-220724"},{"name":"String","version":"5.4.2-20220412-134724"}],"migrationJournalReviewIds":[],"workItemTemplateName":null,"properties":{"botCodeVersion":"2","improvedNumberSupport":true,"timeout":"0s","automationPriority":"PRIORITY_MEDIUM"}}